{"target":"c++","imports":["/home/local/USHERBROOKE/ndoa2501/Documents/ABZ2025/abz2025_casestudy_autonomous_driving-main/main.cpp"],"type_definitions":{"schemas":[],"native_types":{},"events":[]},"top_level_astds":[{"name":"SafetyController","parameters":[{"name":"multi_lane","type":"bool","domain":{"type":"UnboundedDomain"}},{"name":"pre_check","type":"bool","domain":{"type":"UnboundedDomain"}},{"name":"mode","type":"string","domain":{"type":"UnboundedDomain"}}],"type":"Automaton","invariant":"","typed_astd":{"attributes":[{"name":"rear_max_acc","type":"float","initial_value":"5"},{"name":"isStart","type":"bool","initial_value":"true"},{"name":"response_time","type":"float","initial_value":"1"},{"name":"rear_bra_acc","type":"float","initial_value":"3"},{"name":"front_max_bra","type":"float","initial_value":"5"},{"name":"valid_action","type":"bool","initial_value":"true"}],"code":"","interruptCode":"","states":[{"name":"CheckCrash","astd":{"name":"CheckCrash","type":"Choice","invariant":"","typed_astd":{"attributes":[],"code":"","interruptCode":"","left_astd":{"name":"NoCrash","type":"Guard","invariant":"","typed_astd":{"attributes":[],"code":"","interruptCode":"","guard":"!crashed","sub_astd":{"name":"CoreController","type":"Synchronization","typed_astd":{"attributes":[],"code":"","interruptCode":"","synchronization_set":[],"left_astd":{"name":"ChooseAction","type":"Automaton","invariant":"","typed_astd":{"attributes":[],"code":"","interruptCode":"","states":[{"name":"S0","astd":{"type":"Elem","typed_astd":{}},"entry_code":"","stay_code":"","exit_code":"","invariant":""},{"name":"S1","astd":{"type":"Elem","typed_astd":{}},"entry_code":"","stay_code":"","exit_code":"","invariant":""},{"name":"S2","astd":{"type":"Elem","typed_astd":{}},"entry_code":"","stay_code":"","exit_code":"","invariant":""}],"transitions":[{"arrow_type":"Local","arrow":{"from_state_name":"S0","to_state_name":"S1"},"event_template":{"label":"safe","parameters":[],"when":[]},"guard":"","action":"{\n std::cout<<\" Safe Action \"<<\"\\n\";\nif(pre_check){\nvalidate_safe_action();\n}\n}","step":false,"from_final_state_only":false},{"arrow_type":"Local","arrow":{"from_state_name":"S0","to_state_name":"S2"},"event_template":{"label":"unsafe","parameters":[],"when":[]},"guard":"","action":"{\nstd::cout<<\" UnSafe Action \"<<\"\\n\";\nif(!pre_check){\ncontinues_braking_until_safe_distance (response_time, rear_max_acc, front_max_bra, rear_bra_acc, pre_check);\nif(crashed){add_new_action(\"crashed_callback\");\n}else{valid_action=true;}\n}\n}","step":false,"from_final_state_only":false}],"shallow_final_state_names":[],"deep_final_state_names":[],"initial_state_name":"S0"}},"right_astd":{"name":"ControllerUpdateAction","type":"Automaton","invariant":"","typed_astd":{"attributes":[],"code":"","interruptCode":"","states":[{"name":"S0","astd":{"type":"Elem","typed_astd":{}},"entry_code":"","stay_code":"","exit_code":"","invariant":""},{"name":"S1","astd":{"type":"Elem","typed_astd":{}},"entry_code":"","stay_code":"","exit_code":"","invariant":""}],"transitions":[{"arrow_type":"Local","arrow":{"from_state_name":"S0","to_state_name":"S1"},"event_template":{"label":"control_safe","parameters":[],"when":[]},"guard":"","action":"{\nvalid_action = control_safety(response_time, rear_max_acc,front_max_bra, rear_bra_acc, pre_check);\nstd::cout<<\" Action Validation\"<<\"\\n\";\nif(valid_action){add_new_action(\"safe\");\n}else {add_new_action(\"unsafe\");\n}\n\n}","step":false,"from_final_state_only":false}],"shallow_final_state_names":[],"deep_final_state_names":[],"initial_state_name":"S0"}}}}}},"right_astd":{"name":"WithCrash","type":"Guard","invariant":"","typed_astd":{"attributes":[],"code":"","interruptCode":"","guard":"crashed","sub_astd":{"name":"StopController","type":"Automaton","typed_astd":{"attributes":[],"code":"","interruptCode":"","states":[{"name":"S0","astd":{"type":"Elem","typed_astd":{}},"entry_code":"","stay_code":"","exit_code":"","invariant":""},{"name":"S1","astd":{"type":"Elem","typed_astd":{}},"entry_code":"","stay_code":"","exit_code":"","invariant":""}],"transitions":[{"arrow_type":"Local","arrow":{"from_state_name":"S0","to_state_name":"S1"},"event_template":{"label":"crashed_callback","parameters":[],"when":[]},"guard":"","action":"{crashed=false;}","step":false,"from_final_state_only":false}],"shallow_final_state_names":["S1"],"deep_final_state_names":[],"initial_state_name":"S0"}}}}}},"entry_code":"","stay_code":"","exit_code":""},{"name":"S1","astd":{"type":"Elem","typed_astd":{}},"entry_code":"","stay_code":"","exit_code":"","invariant":""}],"transitions":[{"arrow_type":"Local","arrow":{"from_state_name":"S1","to_state_name":"CheckCrash"},"event_template":{"label":"Step","parameters":[],"when":[]},"guard":"","action":"{\n// vehicle_env=initializeEnv();\nif(isStart){\n initPython(multi_lane, mode);\nisStart=false;\n}else{\ngenerate_first_env();\n}\ngenerate_action_from_state();\nupdate_state_from_action(pre_check);\nstd::cout<<\" Get Environment, Get action and update current environment \"<<\"\\n\";\nif(!crashed){\nadd_new_action(\"control_safe\");\n}else{\nadd_new_action(\"crashed_callback\");\n}\n\n}","step":false,"from_final_state_only":false},{"arrow_type":"Local","arrow":{"from_state_name":"CheckCrash","to_state_name":"CheckCrash"},"event_template":{"label":"Step","parameters":[],"when":[]},"guard":"!crashed && valid_action","action":"{\nif(isStart){\n initPython(multi_lane, mode);\nisStart=false;\n}\ngenerate_action_from_state();\nupdate_state_from_action(pre_check);\nstd::cout<<\" Get Environment, Get action and update current environment \"<<\"\\n\";\nif(!crashed){\nadd_new_action(\"control_safe\");\n}else{\nadd_new_action(\"crashed_callback\");\n}\nvalid_action = false;\n}","step":false,"from_final_state_only":false}],"shallow_final_state_names":[],"deep_final_state_names":["CheckCrash"],"initial_state_name":"S1"}},{"name":"Test","parameters":[{"name":"mode","type":"string","domain":{"type":"UnboundedDomain"}},{"name":"multi_lane","type":"bool","domain":{"type":"UnboundedDomain"}}],"type":"PersistentGuard","invariant":"","typed_astd":{"attributes":[{"name":"i","type":"int","initial_value":"0"}],"code":"","interruptCode":"","guard":"i < 50","sub_astd":{"name":"LoopTest","type":"Kleene","typed_astd":{"attributes":[],"code":"","interruptCode":"","sub_astd":{"name":"StopTest","type":"TimedInterrupt","invariant":"","typed_astd":{"attributes":[],"code":"{\nif(crashed){i++;stop_test();std::cout<<\" ASTD Action \"<<\"\\n\";}\n}","interruptCode":"{i++;stop_test();add_new_action(\"empty\");std::cout<<\"Interrupt Action \"<<\"\\n\";}","duration":"60","duration_unit":"Second","left_astd":{"name":"LaunchTest","type":"Automaton","invariant":"","typed_astd":{"attributes":[],"code":"","interruptCode":"","states":[{"name":"ControllerLoopCall","astd":{"name":"ControllerLoopCall","type":"Call","invariant":"","typed_astd":{"called_astd_name":"SafetyController","call_arguments":[{"name":"multi_lane","value":{"type":"Expression","content":"multi_lane"}},{"name":"pre_check","value":{"type":"Constant","content":false}},{"name":"mode","value":{"type":"Expression","content":"mode"}}]}},"entry_code":"","stay_code":"","exit_code":""}],"transitions":[],"shallow_final_state_names":[],"deep_final_state_names":["ControllerLoopCall"],"initial_state_name":"ControllerLoopCall"}},"right_astd":{"name":"StopTestInstance","type":"Automaton","invariant":"","typed_astd":{"attributes":[],"code":"","interruptCode":"","states":[{"name":"S0","astd":{"type":"Elem","typed_astd":{}},"entry_code":"","stay_code":"","exit_code":"","invariant":""}],"transitions":[],"shallow_final_state_names":["S0"],"deep_final_state_names":[],"initial_state_name":"S0"}}}}}}}}],"conf":[]}