{"iastd":{"target":"c++","imports":[],"type_definitions":{"schemas":[],"native_types":{},"events":[]},"top_level_astds":[{"name":"SafetyController","parameters":[{"name":"multi_lane","type":"bool","domain":{"type":"UnboundedDomain"}},{"name":"pre_check","type":"bool","domain":{"type":"UnboundedDomain"}}],"type":"Automaton","invariant":"","typed_astd":{"attributes":[{"name":"rear_max_acc","type":"float","initial_value":"5"},{"name":"isStart","type":"bool","initial_value":"true"},{"name":"response_time","type":"float","initial_value":"1"},{"name":"rear_bra_acc","type":"float","initial_value":"3"},{"name":"front_max_bra","type":"float","initial_value":"5"},{"name":"valid_action","type":"bool","initial_value":"true"}],"code":"","interruptCode":"","states":[{"name":"CheckCrash","astd":{"name":"CheckCrash","type":"Choice","invariant":"","typed_astd":{"attributes":[],"code":"","interruptCode":"","left_astd":{"name":"NoCrash","type":"Guard","invariant":"","typed_astd":{"attributes":[],"code":"","interruptCode":"","guard":"!crashed","sub_astd":{"name":"CoreController","type":"Synchronization","typed_astd":{"attributes":[],"code":"","interruptCode":"","synchronization_set":[],"left_astd":{"name":"ControllerUpdateAction","type":"Automaton","invariant":"","typed_astd":{"attributes":[],"code":"","interruptCode":"","states":[{"name":"S0","astd":{"type":"Elem","typed_astd":{}},"entry_code":"","stay_code":"","exit_code":"","invariant":""},{"name":"S1","astd":{"type":"Elem","typed_astd":{}},"entry_code":"","stay_code":"","exit_code":"","invariant":""}],"transitions":[{"arrow_type":"Local","arrow":{"from_state_name":"S0","to_state_name":"S1"},"event_template":{"label":"control_safe","parameters":[],"when":[]},"guard":"","action":"{\nvalid_action = control_safety(response_time, rear_max_acc,front_max_bra, rear_bra_acc, pre_check);\nstd::cout<<\" Action Validation\"<<\"\\n\";\nif(valid_action){add_new_action(\"safe\");\n}else {add_new_action(\"unsafe\");\n}\n\n}","step":false,"from_final_state_only":false}],"shallow_final_state_names":[],"deep_final_state_names":[],"initial_state_name":"S0"}},"right_astd":{"name":"ChooseAction","type":"Automaton","invariant":"","typed_astd":{"attributes":[],"code":"","interruptCode":"","states":[{"name":"S0","astd":{"type":"Elem","typed_astd":{}},"entry_code":"","stay_code":"","exit_code":"","invariant":""},{"name":"S1","astd":{"type":"Elem","typed_astd":{}},"entry_code":"","stay_code":"","exit_code":"","invariant":""},{"name":"S2","astd":{"type":"Elem","typed_astd":{}},"entry_code":"","stay_code":"","exit_code":"","invariant":""}],"transitions":[{"arrow_type":"Local","arrow":{"from_state_name":"S0","to_state_name":"S1"},"event_template":{"label":"safe","parameters":[],"when":[]},"guard":"","action":"{\n std::cout<<\" Safe Action \"<<\"\\n\";\nif(pre_check){\nvalidate_safe_action();\n}\n}","step":false,"from_final_state_only":false},{"arrow_type":"Local","arrow":{"from_state_name":"S0","to_state_name":"S2"},"event_template":{"label":"unsafe","parameters":[],"when":[]},"guard":"","action":"{\nstd::cout<<\" UnSafe Action \"<<\"\\n\";\nif(!pre_check){\ncontinues_braking_until_safe_distance (response_time, rear_max_acc, front_max_bra, rear_bra_acc, pre_check);\nif(crashed){add_new_action(\"crashed_callback\");\n}else{valid_action=true;}\n}\n}","step":false,"from_final_state_only":false}],"shallow_final_state_names":[],"deep_final_state_names":[],"initial_state_name":"S0"}}}}}},"right_astd":{"name":"WithCrash","type":"Guard","invariant":"","typed_astd":{"attributes":[],"code":"","interruptCode":"","guard":"crashed","sub_astd":{"name":"StopController","type":"Automaton","typed_astd":{"attributes":[],"code":"","interruptCode":"","states":[{"name":"S0","astd":{"type":"Elem","typed_astd":{}},"entry_code":"","stay_code":"","exit_code":"","invariant":""},{"name":"S1","astd":{"type":"Elem","typed_astd":{}},"entry_code":"","stay_code":"","exit_code":"","invariant":""}],"transitions":[{"arrow_type":"Local","arrow":{"from_state_name":"S0","to_state_name":"S1"},"event_template":{"label":"crashed_callback","parameters":[],"when":[]},"guard":"","action":"{crashed=false;}","step":false,"from_final_state_only":false}],"shallow_final_state_names":["S1"],"deep_final_state_names":[],"initial_state_name":"S0"}}}}}},"entry_code":"","stay_code":"","exit_code":""},{"name":"S1","astd":{"type":"Elem","typed_astd":{}},"entry_code":"","stay_code":"","exit_code":"","invariant":""}],"transitions":[{"arrow_type":"Local","arrow":{"from_state_name":"S1","to_state_name":"CheckCrash"},"event_template":{"label":"Step","parameters":[],"when":[]},"guard":"","action":"{\n// vehicle_env=initializeEnv();\nif(isStart){\n initPython();\nisStart=false;\n}else{\ngenerate_first_env();\n}\ngenerate_action_from_state();\nupdate_state_from_action(pre_check);\nstd::cout<<\" Get Environment, Get action and update current environment \"<<\"\\n\";\nif(!crashed){\nadd_new_action(\"control_safe\");\n}else{\nadd_new_action(\"crashed_callback\");\n}\n\n}","step":false,"from_final_state_only":false},{"arrow_type":"Local","arrow":{"from_state_name":"CheckCrash","to_state_name":"CheckCrash"},"event_template":{"label":"Step","parameters":[],"when":[]},"guard":"!crashed && valid_action","action":"{\nif(isStart){\n initPython();\nisStart=false;\n}\ngenerate_action_from_state();\nupdate_state_from_action(pre_check);\nstd::cout<<\" Get Environment, Get action and update current environment \"<<\"\\n\";\nif(!crashed){\nadd_new_action(\"control_safe\");\n}else{\nadd_new_action(\"crashed_callback\");\n}\nvalid_action = false;\n}","step":false,"from_final_state_only":false}],"shallow_final_state_names":[],"deep_final_state_names":["CheckCrash"],"initial_state_name":"S1"}},{"name":"Test","parameters":[],"type":"PersistentGuard","invariant":"","typed_astd":{"attributes":[{"name":"i","type":"int","initial_value":"0"}],"code":"","interruptCode":"","guard":"i < 50","sub_astd":{"name":"LoopTest","type":"Kleene","typed_astd":{"attributes":[],"code":"","interruptCode":"","sub_astd":{"name":"StopTest","type":"TimedInterrupt","invariant":"","typed_astd":{"attributes":[],"code":"{\nif(crashed){i++;stop_test();std::cout<<\" ASTD Action \"<<\"\\n\";}\n}","interruptCode":"{i++;stop_test();add_new_action(\"empty\");std::cout<<\"Interrupt Action \"<<\"\\n\";}","duration":"60","duration_unit":"Second","left_astd":{"name":"LaunchTest","type":"Automaton","invariant":"","typed_astd":{"attributes":[],"code":"","interruptCode":"","states":[{"name":"ControllerLoopCall","astd":{"name":"ControllerLoopCall","type":"Call","invariant":"","typed_astd":{"called_astd_name":"SafetyController","call_arguments":[{"name":"multi_lane","value":{"type":"Constant","content":true}},{"name":"pre_check","value":{"type":"Constant","content":false}}]}},"entry_code":"","stay_code":"","exit_code":""}],"transitions":[],"shallow_final_state_names":[],"deep_final_state_names":["ControllerLoopCall"],"initial_state_name":"ControllerLoopCall"}},"right_astd":{"name":"StopTestInstance","type":"Automaton","invariant":"","typed_astd":{"attributes":[],"code":"","interruptCode":"","states":[{"name":"S0","astd":{"type":"Elem","typed_astd":{}},"entry_code":"","stay_code":"","exit_code":"","invariant":""}],"transitions":[],"shallow_final_state_names":["S0"],"deep_final_state_names":[],"initial_state_name":"S0"}}}}}}}}],"conf":[]},"editor":{"id":564,"schemas":[],"native_types":[],"imports":[],"eventSignatures":[],"target":"C++","files":[{"astd":{"id":"id_425","position":{"x":10,"y":2},"width":1175,"height":840,"label":"SafetyController","initial":false,"entryCode":"","stayCode":"","exitCode":"","invariant":"","comment":"","class":"astd","tabs":[{"id":"id_554","label":"","parent":"id_425","attributes":[{"parent":"id_554","label":"rear_max_acc","type":"float","value":"5"},{"parent":"id_554","label":"isStart","type":"bool","value":"true"},{"parent":"id_554","label":"response_time","type":"float","value":"1"},{"parent":"id_554","label":"rear_bra_acc","type":"float","value":"3"},{"parent":"id_554","label":"front_max_bra","type":"float","value":"5"},{"parent":"id_554","label":"valid_action","type":"bool","value":"true"}],"code":"","interruptCode":"","test":false,"parameter_name":"","parameter_domain":"","class":"Automaton"}],"state":"non-final","orderNumber":"","items":[{"id":"id_471","parent":"id_425","position":{"x":360,"y":63},"width":664,"height":681,"label":"CheckCrash","initial":false,"entryCode":"","stayCode":"","exitCode":"","invariant":"","comment":"","class":"astd","tabs":[{"id":"id_553","label":"","parent":"id_471","attributes":[],"code":"","interruptCode":"","test":false,"parameter_name":"","parameter_domain":"","class":"| Choice"}],"state":"deep-final","orderNumber":"","items":[{"id":"id_517","parent":"id_471","position":{"x":50,"y":39},"width":572,"height":425,"label":"NoCrash","initial":false,"entryCode":"","stayCode":"","exitCode":"","invariant":"","comment":"","class":"astd","tabs":[{"id":"id_549","label":"","parent":"id_517","attributes":[],"code":"","interruptCode":"","test":false,"parameter_name":"","parameter_domain":"","class":"⇒ Guard","predicate":"!crashed"},{"id":"id_550","label":"CoreController","parent":"id_517","attributes":[],"code":"","interruptCode":"","test":false,"parameter_name":"","parameter_domain":"","class":"|[...]| Synchronization","labels":""}],"state":"non-final","orderNumber":"","items":[{"id":"id_450","parent":"id_517","position":{"x":28,"y":42},"width":500,"height":174,"label":"ControllerUpdateAction","initial":false,"entryCode":"","stayCode":"","exitCode":"","invariant":"","comment":"","class":"astd","tabs":[{"id":"id_548","label":"","parent":"id_450","attributes":[],"code":"","interruptCode":"","test":false,"parameter_name":"","parameter_domain":"","class":"Automaton"}],"state":"non-final","orderNumber":"","items":[{"id":"id_452","parent":"id_450","position":{"x":44,"y":82},"width":30.72,"height":30,"label":"S0","initial":true,"entryCode":"","stayCode":"","exitCode":"","invariant":"","comment":"","class":"state","final":false,"history":false,"deephistory":false},{"id":"id_453","parent":"id_450","position":{"x":424,"y":72},"width":30.72,"height":30,"label":"S1","initial":false,"entryCode":"","stayCode":"","exitCode":"","invariant":"","comment":"","class":"state","final":false,"history":false,"deephistory":false}],"parameters":[],"test_parameters":[]},{"id":"id_455","parent":"id_517","position":{"x":29,"y":230},"width":503,"height":171,"label":"ChooseAction","initial":false,"entryCode":"","stayCode":"","exitCode":"","invariant":"","comment":"","class":"astd","tabs":[{"id":"id_547","label":"","parent":"id_455","attributes":[],"code":"","interruptCode":"","test":false,"parameter_name":"","parameter_domain":"","class":"Automaton"}],"state":"non-final","orderNumber":"","items":[{"id":"id_456","parent":"id_455","position":{"x":25,"y":61},"width":30.72,"height":30,"label":"S0","initial":true,"entryCode":"","stayCode":"","exitCode":"","invariant":"","comment":"","class":"state","final":false,"history":false,"deephistory":false},{"id":"id_457","parent":"id_455","position":{"x":426,"y":34},"width":30.72,"height":30,"label":"S1","initial":false,"entryCode":"","stayCode":"","exitCode":"","invariant":"","comment":"","class":"state","final":false,"history":false,"deephistory":false},{"id":"id_461","parent":"id_455","position":{"x":406,"y":124},"width":30.72,"height":30,"label":"S2","initial":false,"entryCode":"","stayCode":"","exitCode":"","invariant":"","comment":"","class":"state","final":false,"history":false,"deephistory":false}],"parameters":[],"test_parameters":[]}],"parameters":[],"test_parameters":[]},{"id":"id_522","parent":"id_471","position":{"x":46,"y":484},"width":565,"height":175,"label":"WithCrash","initial":false,"entryCode":"","stayCode":"","exitCode":"","invariant":"","comment":"","class":"astd","tabs":[{"id":"id_551","label":"","parent":"id_522","attributes":[],"code":"","interruptCode":"","test":false,"parameter_name":"","parameter_domain":"","class":"⇒ Guard","predicate":"crashed"},{"id":"id_552","label":"StopController","parent":"id_522","attributes":[],"code":"","interruptCode":"","test":false,"parameter_name":"","parameter_domain":"","class":"Automaton"}],"state":"non-final","orderNumber":"","items":[{"id":"id_525","parent":"id_522","position":{"x":39,"y":88},"width":30.72,"height":30,"label":"S0","initial":true,"entryCode":"","stayCode":"","exitCode":"","invariant":"","comment":"","class":"state","final":false,"history":false,"deephistory":false},{"id":"id_526","parent":"id_522","position":{"x":478,"y":94},"width":30.72,"height":30,"label":"S1","initial":false,"entryCode":"","stayCode":"","exitCode":"","invariant":"","comment":"","class":"state","final":true,"history":false,"deephistory":false}],"parameters":[],"test_parameters":[]}],"parameters":[],"test_parameters":[]},{"id":"id_474","parent":"id_425","position":{"x":38,"y":355},"width":30.72,"height":30,"label":"S1","initial":true,"entryCode":"","stayCode":"","exitCode":"","invariant":"","comment":"","class":"state","final":false,"history":false,"deephistory":false}],"parameters":[{"parent":"id_425","label":"multi_lane","type":"bool","domain":"","domainType":"UnboundedDomain"},{"parent":"id_425","label":"pre_check","type":"bool","domain":"","domainType":"UnboundedDomain"}],"test_parameters":[]},"links":[{"id":"id_454","source":"id_452","destination":"id_453","details":true,"comment":"","parameters":"","guard":"","when":"","displayNumber":3,"code":"{\nvalid_action = control_safety(response_time, rear_max_acc,front_max_bra, rear_bra_acc, pre_check);\nstd::cout<<\" Action Validation\"<<\"\\n\";\nif(valid_action){add_new_action(\"safe\");\n}else {add_new_action(\"unsafe\");\n}\n\n}","label":"control_safe","type":"default","final":false,"inflexion":[],"test_parameters":[],"commentLabel":"","parameterize":"[]"},{"id":"id_459","source":"id_456","destination":"id_457","details":true,"comment":"","parameters":"","guard":"","when":"","displayNumber":3,"code":"{\n std::cout<<\" Safe Action \"<<\"\\n\";\nif(pre_check){\nvalidate_safe_action();\n}\n}","label":"safe","type":"default","final":false,"inflexion":[],"test_parameters":[],"commentLabel":"","parameterize":"[]"},{"id":"id_462","source":"id_456","destination":"id_461","details":true,"comment":"","parameters":"","guard":"","when":"","displayNumber":3,"code":"{\nstd::cout<<\" UnSafe Action \"<<\"\\n\";\nif(!pre_check){\ncontinues_braking_until_safe_distance (response_time, rear_max_acc, front_max_bra, rear_bra_acc, pre_check);\nif(crashed){add_new_action(\"crashed_callback\");\n}else{valid_action=true;}\n}\n}","label":"unsafe","type":"default","final":false,"inflexion":[],"test_parameters":[],"commentLabel":"","parameterize":"[]"},{"id":"id_475","source":"id_474","destination":"id_471","details":true,"comment":"","parameters":"","guard":"","when":"","displayNumber":3,"code":"{\n// vehicle_env=initializeEnv();\nif(isStart){\n initPython();\nisStart=false;\n}else{\ngenerate_first_env();\n}\ngenerate_action_from_state();\nupdate_state_from_action(pre_check);\nstd::cout<<\" Get Environment, Get action and update current environment \"<<\"\\n\";\nif(!crashed){\nadd_new_action(\"control_safe\");\n}else{\nadd_new_action(\"crashed_callback\");\n}\n\n}","label":"Step","type":"default","final":false,"inflexion":[],"test_parameters":[],"commentLabel":"","parameterize":"[]"},{"id":"id_482","source":"id_471","destination":"id_471","details":true,"comment":"","parameters":"","guard":"!crashed && valid_action","when":"","displayNumber":3,"code":"{\nif(isStart){\n initPython();\nisStart=false;\n}\ngenerate_action_from_state();\nupdate_state_from_action(pre_check);\nstd::cout<<\" Get Environment, Get action and update current environment \"<<\"\\n\";\nif(!crashed){\nadd_new_action(\"control_safe\");\n}else{\nadd_new_action(\"crashed_callback\");\n}\nvalid_action = false;\n}","label":"Step","type":"default","final":false,"inflexion":[],"test_parameters":[],"commentLabel":"","parameterize":"[]"},{"id":"id_527","source":"id_525","destination":"id_526","details":true,"comment":"","parameters":"","guard":"","when":"","displayNumber":3,"code":"{crashed=false;}","label":"crashed_callback","type":"default","final":false,"inflexion":[],"test_parameters":[],"commentLabel":"","parameterize":"[]"}]},{"astd":{"id":"id_498","position":{"x":10,"y":2},"width":1060,"height":452,"label":"Test","initial":false,"entryCode":"","stayCode":"","exitCode":"","invariant":"","comment":"","class":"astd","tabs":[{"id":"id_561","label":"","parent":"id_498","attributes":[{"parent":"id_561","label":"i","type":"int","value":"0"}],"code":"","interruptCode":"","test":false,"parameter_name":"","parameter_domain":"","class":"|⇒ Persistent Guard","predicate":"i < 50"},{"id":"id_562","label":"LoopTest","parent":"id_498","attributes":[],"code":"","interruptCode":"","test":false,"parameter_name":"","parameter_domain":"","class":"★ Closure"},{"id":"id_563","label":"StopTest","parent":"id_498","attributes":[],"code":"{\nif(crashed){i++;stop_test();std::cout<<\" ASTD Action \"<<\"\\n\";}\n}","interruptCode":"{i++;stop_test();add_new_action(\"empty\");std::cout<<\"Interrupt Action \"<<\"\\n\";}","test":false,"parameter_name":"","parameter_domain":"","invariant":"","class":"Timed interrupt","timer":"60","timeUnit":"Second"}],"state":"non-final","orderNumber":"","items":[{"id":"id_510","parent":"id_498","position":{"x":34,"y":95},"width":494,"height":304,"label":"LaunchTest","initial":false,"entryCode":"","stayCode":"","exitCode":"","invariant":"","comment":"","class":"astd","tabs":[{"id":"id_559","label":"","parent":"id_510","attributes":[],"code":"","interruptCode":"","test":false,"parameter_name":"","parameter_domain":"","class":"Automaton"}],"state":"non-final","orderNumber":"","items":[{"id":"id_502","parent":"id_510","position":{"x":125,"y":49},"width":226,"height":199,"label":"ControllerLoopCall","initial":true,"entryCode":"","stayCode":"","exitCode":"","invariant":"","comment":"","class":"astd","tabs":[{"id":"id_558","label":"","parent":"id_502","attributes":[],"code":"","interruptCode":"","test":false,"parameter_name":"","parameter_domain":"","class":"Call","target":"SafetyController","argument":["true","false"]}],"state":"deep-final","orderNumber":"","items":[],"parameters":[],"test_parameters":[]}],"parameters":[],"test_parameters":[]},{"id":"id_503","parent":"id_498","position":{"x":712,"y":125},"width":250,"height":250,"label":"StopTestInstance","initial":false,"entryCode":"","stayCode":"","exitCode":"","invariant":"","comment":"","class":"astd","tabs":[{"id":"id_560","label":"","parent":"id_503","attributes":[],"code":"","interruptCode":"","test":false,"parameter_name":"","parameter_domain":"","class":"Automaton"}],"state":"non-final","orderNumber":"","items":[{"id":"id_507","parent":"id_503","position":{"x":94,"y":108},"width":30.72,"height":30,"label":"S0","initial":true,"entryCode":"","stayCode":"","exitCode":"","invariant":"","comment":"","class":"state","final":true,"history":false,"deephistory":false}],"parameters":[],"test_parameters":[]}],"parameters":[],"test_parameters":[]},"links":[{"id":"id_512","source":"id_510","destination":"id_503","details":true,"comment":"","parameters":"","guard":"","when":"","displayNumber":3,"code":"","label":"?","type":"Timeout","final":false,"inflexion":[],"test_parameters":[],"commentLabel":"","parameterize":"[]"}]}],"traces":[],"config":[]}}